<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Multi-Planet Simulator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        canvas { display: block; }
        #tooltip { position: absolute; display: none; background: rgba(0, 0, 0, 0.75); color: white; padding: 8px 12px; border-radius: 8px; font-size: 14px; pointer-events: none; border: 1px solid rgba(255, 255, 255, 0.2); }
        #planet-detail-panel { position: absolute; top: 20px; right: 20px; width: 320px; background: rgba(10, 20, 40, 0.8); border: 1px solid rgba(0, 191, 255, 0.5); border-radius: 8px; color: #e0e0e0; display: none; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); z-index: 101; }
        #planet-detail-header { padding: 10px 15px; background: rgba(0, 191, 255, 0.1); border-bottom: 1px solid rgba(0, 191, 255, 0.5); display: flex; justify-content: space-between; align-items: center; }
        #planet-name { font-size: 20px; font-weight: bold; margin: 0; color: #fff; }
        #close-panel-btn { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; line-height: 1; }
        #planet-viewer { width: 100%; height: 200px; background-color: #000; }
        #planet-info { padding: 15px; font-size: 14px; }
        #planet-info ul { list-style: none; padding: 0; margin: 0; }
        #planet-info li { margin-bottom: 8px; }
        #planet-info .label { color: #00bfff; display: inline-block; width: 120px; }
        #system-list-toggle { position: absolute; top: 20px; left: 20px; width: 40px; height: 40px; background: rgba(10, 20, 40, 0.8); border: 1px solid rgba(0, 191, 255, 0.5); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; color: #fff; z-index: 100; }
        #reset-view-toggle { position: absolute; top: 20px; left: 70px; width: 40px; height: 40px; background: rgba(10, 20, 40, 0.8); border: 1px solid rgba(0, 191, 255, 0.5); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; color: #fff; z-index: 100; }
        #system-list-panel { position: absolute; top: 70px; left: 20px; width: 280px; max-height: 400px; background: rgba(10, 20, 40, 0.8); border: 1px solid rgba(0, 191, 255, 0.5); border-radius: 8px; color: #e0e0e0; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); overflow: hidden; display: none; z-index: 101; }
        #system-list-header { padding: 10px 15px; background: rgba(0, 191, 255, 0.1); border-bottom: 1px solid rgba(0, 191, 255, 0.5); }
        #system-list-header h3 { margin: 0; font-size: 18px; }
        #system-list-body { max-height: 340px; overflow-y: auto; }
        #planet-list-table { width: 100%; border-collapse: collapse; }
        #planet-list-table td { padding: 12px 15px; border-bottom: 1px solid rgba(0, 191, 255, 0.1); cursor: pointer; }
        #planet-list-table tr:hover td { background: rgba(0, 191, 255, 0.2); }
    </style>
</head>
<body>
    <canvas id="simulation-canvas"></canvas>
    <div id="tooltip"></div>
    <div id="planet-detail-panel">
        <div id="planet-detail-header">
            <h2 id="planet-name">Planet Name</h2>
            <button id="close-panel-btn">&times;</button>
        </div>
        <canvas id="planet-viewer"></canvas>
        <div id="planet-info">
            <ul>
                <li><span class="label">Orbital Period:</span> <span id="info-period">--</span> days</li>
                <li><span class="label">Planet Radius:</span> <span id="info-prad">--</span> Earths</li>
                <li><span class="label">Est. Temperature:</span> <span id="info-temp">--</span> K</li>
                <li><span class="label">Star Radius:</span> <span id="info-srad">--</span> Suns</li>
            </ul>
        </div>
    </div>
    <div id="system-list-toggle">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
    </div>
    <div id="reset-view-toggle" title="Back to System View">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.3"/></svg>
    </div>
    <div id="system-list-panel">
        <div id="system-list-header">
            <h3>System Planets</h3>
        </div>
        <div id="system-list-body">
            <table id="planet-list-table">
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        // --- Core 3D Components ---
        let scene, camera, renderer, starField, star;
        const textureLoader = new THREE.TextureLoader();
        const planetObjects = [];
        const tooltip = document.getElementById('tooltip');
        
        // --- Detail Panel Components ---
        const detailPanel = document.getElementById('planet-detail-panel');
        let detailScene, detailCamera, detailRenderer, detailPlanet, detailAnimationId;

        // --- Interaction Variables ---
        let mouse = new THREE.Vector2();
        let mouseDownPos = new THREE.Vector2();
        let raycaster = new THREE.Raycaster();
        let intersectedObject = null;
        let isDragging = false;
        let isRightDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let target = new THREE.Vector3(0, 0, 0);

        // --- System List & Camera Animation ---
        let systemListPanel, systemListToggle;
        let isAnimatingCamera = false;
        let cameraAnimationTarget = new THREE.Vector3();
        let cameraAnimationLookAt = new THREE.Vector3();
        let initialCameraPosition = new THREE.Vector3();
        let focusedObject = null;
        
        const textureCache = {};

        function getPlanetMaterial(planetData) {
            const temp = planetData.koi_teq;
            if (temp > 1000) return new THREE.MeshStandardMaterial({ map: textureCache.hot, roughness: 0.9, metalness: 0.1 });
            if (temp > 373) return new THREE.MeshStandardMaterial({ map: textureCache.warm, roughness: 0.9, metalness: 0.1 });
            if (temp > 250) return new THREE.MeshStandardMaterial({ map: textureCache.temperate, roughness: 0.9, metalness: 0.1 });
            return new THREE.MeshStandardMaterial({ map: textureCache.cold, roughness: 0.9, metalness: 0.1 });
        }

        function init() {
            const canvas = document.getElementById('simulation-canvas');
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 5000);
            camera.position.set(0, 250, 600);
            camera.lookAt(target);
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            scene.add(new THREE.AmbientLight(0xffffff, 0.4));

            const starfieldGeometry = new THREE.SphereGeometry(4000, 64, 64);
            const starfieldTexture = textureLoader.load('https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/galaxy_starfield.png');
            starField = new THREE.Mesh(starfieldGeometry, new THREE.MeshBasicMaterial({ map: starfieldTexture, side: THREE.BackSide }));
            scene.add(starField);
            
            initDetailPanel();
            
            window.addEventListener('resize', onWindowResize);
            canvas.addEventListener('mousedown', onMouseDown);
            canvas.addEventListener('mouseup', onMouseUp);
            canvas.addEventListener('mousemove', onMouseMove);
            canvas.addEventListener('wheel', onMouseWheel, { passive: false });
            canvas.addEventListener('contextmenu', e => e.preventDefault());
            document.getElementById('close-panel-btn').addEventListener('click', hideDetailPanel);

            systemListPanel = document.getElementById('system-list-panel');
            systemListToggle = document.getElementById('system-list-toggle');
            systemListToggle.addEventListener('click', () => { systemListPanel.style.display = systemListPanel.style.display === 'block' ? 'none' : 'block'; });
            
            initialCameraPosition.copy(camera.position);
            document.getElementById('reset-view-toggle').addEventListener('click', resetCameraView);
        }

        function initDetailPanel() {
            const canvas = document.getElementById('planet-viewer');
            detailScene = new THREE.Scene();
            detailCamera = new THREE.PerspectiveCamera(50, canvas.clientWidth / canvas.clientHeight, 0.1, 100);
            detailCamera.position.z = 3;
            detailRenderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            detailRenderer.setSize(canvas.clientWidth, canvas.clientHeight);
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 3, 5);
            detailScene.add(light);
            detailScene.add(new THREE.AmbientLight(0xffffff, 0.5));
        }

        function populateSolarSystem(exoplanetData) {
            planetObjects.forEach(p => p.planetMesh.parent.remove(p.planetMesh));
            planetObjects.length = 0;
            const existingSystem = scene.getObjectByName("solarSystem");
            if (existingSystem) scene.remove(existingSystem);

            if (!exoplanetData || exoplanetData.length === 0) return;
            
            textureCache.star = textureLoader.load('textures/star/star.jpg');
            textureCache.hot = textureLoader.load('textures/planet/HD_189733_b.jpeg');
            textureCache.warm = textureLoader.load('textures/planet/GJ_504_b.jpeg');
            textureCache.temperate = textureLoader.load('textures/planet/Kepler-22_b.jpeg');
            textureCache.cold = textureLoader.load('textures/planet/Kepler-7_b.jpeg');

            const systemGroup = new THREE.Group();
            systemGroup.name = "solarSystem";
            const starData = exoplanetData[0];
            
            const starRadius = (Math.log10(parseFloat(starData.koi_srad) || 1.0) * 35 + 12) * 4;
            star = new THREE.Mesh(new THREE.SphereGeometry(starRadius, 64, 64), new THREE.MeshBasicMaterial({ map: textureCache.star }));
            star.add(new THREE.PointLight(0xffffff, 2.5, 10000));
            systemGroup.add(star);
            
            const planetListTableBody = document.querySelector("#planet-list-table tbody");
            planetListTableBody.innerHTML = '';

            exoplanetData.forEach((planetData, index) => {
                if(index === 0) return; 
                
                const planetRadius = (Math.log10(parseFloat(planetData.koi_prad) || 1.0) * 3 + 1) * 6;
                const orbitalPeriod = parseFloat(planetData.koi_period);
                const orbitRadius = (starRadius + 60 + Math.log2(orbitalPeriod) * 40) * 1.5;
                
                const planetMesh = new THREE.Mesh(new THREE.SphereGeometry(planetRadius, 32, 32), getPlanetMaterial(planetData));
                planetMesh.position.x = orbitRadius;

                const orbitPath = new THREE.Line(new THREE.BufferGeometry().setFromPoints(new THREE.Path().absarc(0, 0, orbitRadius, 0, Math.PI * 2, false).getSpacedPoints(128)), new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.25 }));
                orbitPath.rotation.x = Math.PI / 2;
                systemGroup.add(orbitPath);

                planetMesh.userData = planetData;
                systemGroup.add(planetMesh);
                planetObjects.push({ planetMesh, orbitRadius, orbitalPeriod });

                const row = planetListTableBody.insertRow();
                const cell = row.insertCell();
                cell.textContent = planetData.kepler_name;
                row.addEventListener('click', () => {
                    focusOnPlanet(planetMesh);
                    systemListPanel.style.display = 'none';
                });
            });
            scene.add(systemGroup);
        }

        function focusOnPlanet(targetMesh) {
            isAnimatingCamera = true;
            focusedObject = targetMesh;
            const targetPosition = new THREE.Vector3();
            targetMesh.getWorldPosition(targetPosition);
            cameraAnimationLookAt.copy(targetPosition);
            const planetRadius = targetMesh.geometry.boundingSphere.radius;
            const cameraOffset = planetRadius * 5;
            cameraAnimationTarget.copy(targetPosition).add(new THREE.Vector3(0, planetRadius * 2, cameraOffset));
            showDetailPanel(targetMesh);
            window.parent.postMessage({ type: 'planetFocus', data: targetMesh.userData }, '*');
        }

        function resetCameraView() {
            isAnimatingCamera = true;
            focusedObject = null;
            cameraAnimationTarget.copy(initialCameraPosition);
            cameraAnimationLookAt.set(0, 0, 0);
            hideDetailPanel();
        }
        
        function animate() {
            requestAnimationFrame(animate);
            if (focusedObject && !isAnimatingCamera && !isDragging && !isRightDragging) {
                focusedObject.getWorldPosition(target);
                camera.lookAt(target);
            }
            if (isAnimatingCamera) {
                camera.position.lerp(cameraAnimationTarget, 0.04);
                target.lerp(cameraAnimationLookAt, 0.04);
                camera.lookAt(target);
                if (camera.position.distanceTo(cameraAnimationTarget) < 0.1) {
                    isAnimatingCamera = false;
                    camera.position.copy(cameraAnimationTarget);
                    target.copy(cameraAnimationLookAt);
                }
            }
            const time = Date.now() * 0.001;
            planetObjects.forEach(obj => {
                const speed = 0.2 / obj.orbitalPeriod;
                obj.planetMesh.position.set(Math.cos(time * speed) * obj.orbitRadius, 0, Math.sin(time * speed) * obj.orbitRadius);
                obj.planetMesh.rotation.y += 0.005;
            });
            if (star) star.rotation.y += 0.0001;
            starField.rotation.y += 0.00002;
            updateRaycaster();
            renderer.render(scene, camera);
        }

        function animateDetailView() {
            if (detailPlanet) {
                detailPlanet.rotation.y += 0.005;
                detailRenderer.render(detailScene, detailCamera);
                detailAnimationId = requestAnimationFrame(animateDetailView);
            }
        }

        function showDetailPanel(planetObject) {
            if(detailPlanet) detailScene.remove(detailPlanet);
            const data = planetObject.userData;
            document.getElementById('planet-name').textContent = data.kepler_name || 'Unnamed Planet';
            document.getElementById('info-period').textContent = parseFloat(data.koi_period).toFixed(2);
            document.getElementById('info-prad').textContent = parseFloat(data.koi_prad).toFixed(2);
            document.getElementById('info-temp').textContent = data.koi_teq ? `${data.koi_teq} K` : 'N/A';
            document.getElementById('info-srad').textContent = parseFloat(data.koi_srad).toFixed(2);
            detailPlanet = planetObject.clone();
            detailPlanet.material = planetObject.material.clone();
            detailPlanet.position.set(0, 0, 0);
            const atmosphere = detailPlanet.children.find(c => c.type === "Sprite");
            if (atmosphere) detailPlanet.remove(atmosphere);
            const maxDim = new THREE.Box3().setFromObject(detailPlanet).getSize(new THREE.Vector3()).length();
            detailPlanet.scale.multiplyScalar(1.5 / maxDim);
            detailScene.add(detailPlanet);
            detailPanel.style.display = 'block';
            if(detailAnimationId) cancelAnimationFrame(detailAnimationId);
            animateDetailView();
        }

        function hideDetailPanel() {
            detailPanel.style.display = 'none';
            if(detailAnimationId) cancelAnimationFrame(detailAnimationId);
            detailAnimationId = null;
            if(detailPlanet) detailScene.remove(detailPlanet);
            detailPlanet = null;
        }
        
        function onWindowResize() { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); }
        function onMouseDown(e) { e.preventDefault(); isAnimatingCamera = false; mouseDownPos.set(e.clientX, e.clientY); if (e.button === 0) isDragging = true; else if (e.button === 2) isRightDragging = true; previousMousePosition = { x: e.offsetX, y: e.offsetY }; }
        function onMouseUp(e) { if (mouseDownPos.distanceTo(new THREE.Vector2(e.clientX, e.clientY)) < 5 && intersectedObject) { focusOnPlanet(intersectedObject); } isDragging = false; isRightDragging = false; }
        function onMouseMove(e) {
            const currentMousePosition = { x: e.offsetX, y: e.offsetY };
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (e.clientY / window.innerHeight) * 2 + 1;
            const deltaMove = { x: currentMousePosition.x - previousMousePosition.x, y: currentMousePosition.y - previousMousePosition.y };
            if (isDragging) {
                if(focusedObject) focusedObject.getWorldPosition(target);
                const offset = camera.position.clone().sub(target);
                offset.applyAxisAngle(new THREE.Vector3(0, 1, 0), -deltaMove.x * 0.005);
                const pitchAxis = new THREE.Vector3().setFromMatrixColumn(camera.matrix, 0);
                const pitchAngle = -deltaMove.y * 0.005;
                if (Math.abs(Math.asin(offset.clone().normalize().y) + pitchAngle) < Math.PI / 2 * 0.95) {
                    offset.applyAxisAngle(pitchAxis, pitchAngle);
                }
                camera.position.copy(target).add(offset);
            }
            if (isRightDragging) {
                const right = new THREE.Vector3().setFromMatrixColumn(camera.matrix, 0);
                const up = new THREE.Vector3().setFromMatrixColumn(camera.matrix, 1);
                const moveVector = right.multiplyScalar(-deltaMove.x * 0.5).add(up.multiplyScalar(deltaMove.y * 0.5));
                camera.position.add(moveVector);
                target.add(moveVector);
            }
            camera.lookAt(target);
            previousMousePosition = currentMousePosition;
            tooltip.style.left = `${e.clientX + 15}px`;
            tooltip.style.top = `${e.clientY + 15}px`;
        }
        function onMouseWheel(e) { e.preventDefault(); const offset = camera.position.clone().sub(target); const newRadius = offset.length() * (1 - e.deltaY * 0.001); if (newRadius > 50 && newRadius < 4000) { offset.setLength(newRadius); camera.position.copy(target).add(offset); } }
        function updateRaycaster() {
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(planetObjects.map(p => p.planetMesh));
            if (intersects.length > 0) {
                if (intersectedObject !== intersects[0].object) {
                    intersectedObject = intersects[0].object;
                    document.body.style.cursor = 'pointer';
                    tooltip.style.display = 'block';
                    tooltip.innerHTML = `<strong>${intersectedObject.userData.kepler_name || 'Unnamed Planet'}</strong>`;
                }
            } else {
                if (intersectedObject) { tooltip.style.display = 'none'; document.body.style.cursor = 'default'; }
                intersectedObject = null;
            }
        }
        init();
        
        // =================================================================
        // === EXPANDED DATASET WITH ALL ENGINEERED FEATURES REQUIRED BY THE MODEL ===
        // =================================================================
        const multiPlanetData = [
            // Star Data (not a planet)
            { kepler_name: 'Star', koi_period: 0, koi_prad: 0, koi_srad: 1.0, koi_teq: null },
            
            // 1. Confirmed Planet Preset (based on Kepler-452b)
            { 
                kepler_name: 'Kepler-452b (Confirmed)', koi_period: 384.8, koi_duration: 10.5, koi_depth: 250, koi_prad: 1.6, koi_srad: 1.1, koi_slogg: 4.3, koi_teq: 265, koi_insol: 1.1,
                koi_score: 0.99, koi_fpflag_nt: 0, koi_fpflag_ss: 0, koi_fpflag_co: 0, koi_fpflag_ec: 0, koi_tce_plnt_num: 1, koi_steff: 5757, koi_model_snr: 15.2,
                rho_star: 1400.0, rho_circ: 1350.0, density_discrepancy_ratio: 1.03, log_koi_period: 5.95, log_koi_duration: 2.44, log_koi_depth: 5.52, log_koi_prad: 0.99, log_koi_insol: 0.74, log_koi_model_snr: 2.78,
                koi_period_err_ratio: 0.000002, koi_duration_err_ratio: 0.009, koi_prad_err_ratio: 0.12, koi_steff_err_ratio: 0.013,
                v_shape_metric: 23.8, planet_star_radius_ratio: 1.45, depth_x_fpflag_co: 0, snr_x_fpflag_nt: 0,
                'koi_score koi_model_snr': 15.0, 'koi_score koi_depth': 247.5, 'koi_model_snr koi_depth': 3800.0
            },
            
            // 2. Candidate Planet Preset (based on KOI-7923.01)
            { 
                kepler_name: 'KOI-7923.01 (Candidate)', koi_period: 516.4, koi_duration: 12.2, koi_depth: 190, koi_prad: 0.99, koi_srad: 0.95, koi_slogg: 4.45, koi_teq: 230, koi_insol: 0.95,
                koi_score: 0.95, koi_fpflag_nt: 0, koi_fpflag_ss: 0, koi_fpflag_co: 0, koi_fpflag_ec: 0, koi_tce_plnt_num: 1, koi_steff: 5627, koi_model_snr: 11.5,
                rho_star: 1900.0, rho_circ: 1800.0, density_discrepancy_ratio: 1.05, log_koi_period: 6.24, log_koi_duration: 2.58, log_koi_depth: 5.25, log_koi_prad: 0.68, log_koi_insol: -0.05, log_koi_model_snr: 2.52,
                koi_period_err_ratio: 0.000006, koi_duration_err_ratio: 0.016, koi_prad_err_ratio: 0.15, koi_steff_err_ratio: 0.016,
                v_shape_metric: 15.5, planet_star_radius_ratio: 1.04, depth_x_fpflag_co: 0, snr_x_fpflag_nt: 0,
                'koi_score koi_model_snr': 10.9, 'koi_score koi_depth': 180.5, 'koi_model_snr koi_depth': 2185.0
            },

            // 3. False Positive Preset (based on KOI-13.01)
            { 
                kepler_name: 'KOI-13.01 (False Positive)', koi_period: 2.5, koi_duration: 1.8, koi_depth: 35000, koi_prad: 25.4, koi_srad: 1.7, koi_slogg: 4.1, koi_teq: 1800, koi_insol: 2400,
                koi_score: 0.12, koi_fpflag_nt: 0, koi_fpflag_ss: 1, koi_fpflag_co: 1, koi_fpflag_ec: 1, koi_tce_plnt_num: 1, koi_steff: 6500, koi_model_snr: 950.3,
                rho_star: 700.0, rho_circ: 25000.0, density_discrepancy_ratio: 0.028, log_koi_period: 1.25, log_koi_duration: 1.03, log_koi_depth: 10.46, log_koi_prad: 3.27, log_koi_insol: 7.78, log_koi_model_snr: 6.85,
                koi_period_err_ratio: 0.000004, koi_duration_err_ratio: 0.027, koi_prad_err_ratio: 0.078, koi_steff_err_ratio: 0.023,
                v_shape_metric: 19444.4, planet_star_radius_ratio: 14.9, depth_x_fpflag_co: 35000, snr_x_fpflag_nt: 0,
                'koi_score koi_model_snr': 114.0, 'koi_score koi_depth': 4200.0, 'koi_model_snr koi_depth': 33260500.0
            },

            // 4. New Planet: Rocky Candidate (based on Kepler-186f)
            {
                kepler_name: 'Kepler-186f (Candidate)', koi_period: 129.9, koi_duration: 5.5, koi_depth: 150, koi_prad: 1.1, koi_srad: 0.5, koi_slogg: 4.7, koi_teq: 188, koi_insol: 0.32,
                koi_score: 0.91, koi_fpflag_nt: 0, koi_fpflag_ss: 0, koi_fpflag_co: 0, koi_fpflag_ec: 0, koi_tce_plnt_num: 5, koi_steff: 3755, koi_model_snr: 9.8,
                rho_star: 4500.0, rho_circ: 4300.0, density_discrepancy_ratio: 1.04, log_koi_period: 4.87, log_koi_duration: 1.87, log_koi_depth: 5.01, log_koi_prad: 0.74, log_koi_insol: -1.13, log_koi_model_snr: 2.38,
                koi_period_err_ratio: 0.00001, koi_duration_err_ratio: 0.02, koi_prad_err_ratio: 0.1, koi_steff_err_ratio: 0.02,
                v_shape_metric: 27.2, planet_star_radius_ratio: 2.2, depth_x_fpflag_co: 0, snr_x_fpflag_nt: 0,
                'koi_score koi_model_snr': 8.9, 'koi_score koi_depth': 136.5, 'koi_model_snr koi_depth': 1470.0
            },
            
            // 5. New Planet: Temperate Candidate (based on TRAPPIST-1e)
            {
                kepler_name: 'TRAPPIST-1e (Candidate)', koi_period: 6.1, koi_duration: 1.2, koi_depth: 700, koi_prad: 0.91, koi_srad: 0.12, koi_slogg: 5.2, koi_teq: 251, koi_insol: 0.66,
                koi_score: 0.98, koi_fpflag_nt: 0, koi_fpflag_ss: 0, koi_fpflag_co: 0, koi_fpflag_ec: 0, koi_tce_plnt_num: 4, koi_steff: 2566, koi_model_snr: 35.5,
                rho_star: 14000.0, rho_circ: 13500.0, density_discrepancy_ratio: 1.03, log_koi_period: 1.96, log_koi_duration: 0.78, log_koi_depth: 6.55, log_koi_prad: 0.64, log_koi_insol: -0.41, log_koi_model_snr: 3.6,
                koi_period_err_ratio: 0.000003, koi_duration_err_ratio: 0.015, koi_prad_err_ratio: 0.08, koi_steff_err_ratio: 0.025,
                v_shape_metric: 583.3, planet_star_radius_ratio: 7.58, depth_x_fpflag_co: 0, snr_x_fpflag_nt: 0,
                'koi_score koi_model_snr': 34.8, 'koi_score koi_depth': 686.0, 'koi_model_snr koi_depth': 24850.0
            },

            // 6. New Planet: Gas Giant Candidate (based on Kepler-90g)
            {
                kepler_name: 'Kepler-90g (Candidate)', koi_period: 210.6, koi_duration: 11.5, koi_depth: 7200, koi_prad: 8.1, koi_srad: 1.2, koi_slogg: 4.2, koi_teq: 420, koi_insol: 22.7,
                koi_score: 0.85, koi_fpflag_nt: 0, koi_fpflag_ss: 0, koi_fpflag_co: 0, koi_fpflag_ec: 0, koi_tce_plnt_num: 6, koi_steff: 6080, koi_model_snr: 150.1,
                rho_star: 1100.0, rho_circ: 1050.0, density_discrepancy_ratio: 1.04, log_koi_period: 5.35, log_koi_duration: 2.52, log_koi_depth: 8.88, log_koi_prad: 2.2, log_koi_insol: 3.12, log_koi_model_snr: 5.01,
                koi_period_err_ratio: 0.000002, koi_duration_err_ratio: 0.008, koi_prad_err_ratio: 0.1, koi_steff_err_ratio: 0.015,
                v_shape_metric: 626.0, planet_star_radius_ratio: 6.75, depth_x_fpflag_co: 0, snr_x_fpflag_nt: 0,
                'koi_score koi_model_snr': 127.5, 'koi_score koi_depth': 6120.0, 'koi_model_snr koi_depth': 1080720.0
            }
        ];
        
        populateSolarSystem(multiPlanetData);
        animate();
    </script>
</body>
</html>